<!DOCTYPE html>
<html>
    <head>
        <title>2-List</title>
    </head>
    <body>
        <div id ="root">
        </div>
    
    <script src = "../js/react.development.js"></script>
    <script src = "../js/react-dom.development.js"></script>
    <script src = "../js/babel.js"></script>
    <script type = "text/babel">
    
        const rootHandle = document.getElementById('root')

        class Form extends React.Component{
            constructor(){
                super()
                this.state={
                    name:"",
                    email:'',
                    password:'',
                    confPassword:"",
                    message:"",
                    errMessage:""
                }
            }

            handleChange=(e)=>{
                this.setState(
                    {[e.target.name]: e.target.value}
                )
            }
            

            submitHandle=(e) =>{
                console.log(this.state)
                e.preventDefault()

                this.setState((prevState)=>{
                    if(prevState.password == prevState.confPassword){
                        return {message: "Form Submitted", errMessage: ""}
                    }else{
                        return {message: "", errMessage: "password didn't match"}
                    }
                })
                
            }

            render(){
                return(
                <div>
                    <form>
                        <label>
                            <b>Name:&nbsp;</b>
                            <input type='text' name="name" value={this.state.name} onChange={this.handleChange}/>
                        </label><br/><br/>
                        <label>
                            <b>Email:&nbsp;</b>
                            <input type='email' name="email" value={this.state.email} onChange={this.handleChange}/>
                        </label><br/><br/>
                        <label>
                            <b>Password:&nbsp;</b>
                            <input type='password' name="password" value={this.state.password} onChange={this.handleChange}/>
                        </label><br/><br/>
                        <label>
                            <b>Confirm Password:&nbsp;</b>
                            <input type='password' name="confPassword" value={this.state.confPassword} onChange={this.handleChange}/>
                        </label>{this.state.errMessage && <p> {this.state.errMessage} </p>}<br/><br/> 
                        <button onClick={this.submitHandle}>submit</button>
                    </form>
                    {this.state.message && <h2> {this.state.message} </h2>}
                </div>
                )
            }
        }

        ReactDOM.render(<Form />,rootHandle)
        
    </script>
    </body>
</html>